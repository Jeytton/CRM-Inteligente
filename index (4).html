<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinnergie - Sistema de Gestão de Clientes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f8f8;
        }
        
        .sinnergie-gradient {
            background: linear-gradient(135deg, #000000, #64001b, #000000);
        }
        
        .sinnergie-text {
            background: linear-gradient(135deg, #000000, #64001b, #000000);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .modal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .btn-sinnergie {
            background: linear-gradient(135deg, #000000, #64001b, #000000);
            transition: all 0.3s ease;
        }
        
        .btn-sinnergie:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(100, 0, 27, 0.3);
        }
        
        .table-row {
            transition: background-color 0.2s ease;
        }
        
        .table-row:hover {
            background-color: rgba(100, 0, 27, 0.05);
        }
        
        .nav-item {
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .active-nav {
            border-left: 4px solid #64001b;
            background-color: rgba(100, 0, 27, 0.2);
        }
        
        .theme-dark {
            background-color: #1a1a1a !important;
            color: #ffffff !important;
        }
        
        .theme-dark .bg-white {
            background-color: #2d2d2d !important;
            color: #ffffff !important;
        }
        
        .theme-dark .text-gray-900 {
            color: #ffffff !important;
        }
        
        .theme-dark .border-gray-300 {
            border-color: #4a4a4a !important;
        }
        
        .notification-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .hidden {
            display: none !important;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
    </style>
<script src="https://lib.youware.com/youware-lib.1747145198.js" id="yourware-lib"></script></head>
<body>
    <div class="flex h-screen bg-gray-100" id="mainContainer">
        <!-- Barra lateral -->
        <div class="sinnergie-gradient text-white w-64 flex flex-col shadow-lg">
            <div class="p-4 flex items-center justify-center border-b border-gray-800">
                <h1 class="text-2xl font-bold">Sinnergie</h1>
            </div>
            <nav class="flex-1 overflow-y-auto py-4">
                <div class="px-4 py-2 active-nav nav-item cursor-pointer flex items-center" data-section="clientes">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    Clientes
                </div>
                <div class="px-4 py-2 nav-item cursor-pointer flex items-center" data-section="tarefas">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                    </svg>
                    Tarefas
                </div>
                <div class="px-4 py-2 nav-item cursor-pointer flex items-center" data-section="metricas">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                    Métricas
                </div>
                <div class="px-4 py-2 nav-item cursor-pointer flex items-center" data-section="configuracoes">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    Configurações
                </div>
            </nav>
            <div class="p-4 border-t border-gray-800">
                <div class="flex items-center">
                    <div class="h-8 w-8 rounded-full bg-white text-gray-800 flex items-center justify-center font-bold">
                        A
                    </div>
                    <div class="ml-3">
                        <p class="text-sm font-medium">Administrador</p>
                        <p class="text-xs text-gray-300">admin@sinnergie.com</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conteúdo principal -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Cabeçalho Superior -->
            <header class="bg-white shadow-sm z-10">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
                    <h2 class="text-2xl font-bold sinnergie-text" id="pageTitle">Gestão de Clientes</h2>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <input type="text" placeholder="Buscar..." id="globalSearch" class="px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-900 focus:border-transparent">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute right-3 top-2.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </div>
                        <button class="p-2 rounded-full hover:bg-gray-100 relative" id="notificationBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                            </svg>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400 notification-badge hidden" id="notificationBadge"></span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Área de conteúdo principal -->
            <main class="flex-1 overflow-y-auto bg-gray-50 p-4">
                <!-- Seção de Clientes -->
                <div id="clientesSection" class="max-w-7xl mx-auto">
                    <!-- Botões de ação -->
                    <div class="mb-6 flex flex-wrap gap-4">
                        <button id="addClientBtn" class="btn-sinnergie text-white px-4 py-2 rounded-lg flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                            Adicionar Cliente
                        </button>
                        <button id="importCSVBtn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg flex items-center hover:bg-gray-50">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
                            </svg>
                            Importar CSV
                        </button>
                        <button id="filterClientsBtn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg flex items-center hover:bg-gray-50">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                            </svg>
                            Filtrar
                        </button>
                        <button id="exportClientsBtn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg flex items-center hover:bg-gray-50">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            Exportar
                        </button>
                    </div>

                    <!-- Tabela do cliente -->
                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Nome
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            E-mail
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Telefone
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Empresa
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Status
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Ações
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="clientTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- A tabela será preenchida dinamicamente -->
                                </tbody>
                            </table>
                        </div>
                        <div id="emptyState" class="py-12 flex flex-col items-center justify-center text-center px-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900">Nenhum cliente cadastrado</h3>
                            <p class="mt-1 text-sm text-gray-500">
                                Comece adicionando um novo cliente ou importando um arquivo CSV.
                            </p>
                            <div class="mt-6 flex space-x-3">
                                <button id="emptyAddClientBtn" class="btn-sinnergie text-white px-4 py-2 rounded-lg flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                                    </svg>
                                    Adicionar Cliente
                                </button>
                                <button id="emptyImportCSVBtn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg flex items-center hover:bg-gray-50">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
                                    </svg>
                                    Importar CSV
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Seção de Tarefas -->
                <div id="tarefasSection" class="max-w-7xl mx-auto hidden">
                    <!-- Botões de ação para tarefas -->
                    <div class="mb-6 flex flex-wrap gap-4">
                        <button id="addTaskBtn" class="btn-sinnergie text-white px-4 py-2 rounded-lg flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                            Adicionar Tarefa
                        </button>
                        <button id="filterTasksBtn" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg flex items-center hover:bg-gray-50">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                            </svg>
                            Filtrar
                        </button>
                    </div>

                    <!-- Tabela de tarefas -->
                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Título
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Cliente
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Data Limite
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Prioridade
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Status
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Ações
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="taskTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- A tabela será preenchida dinamicamente -->
                                </tbody>
                            </table>
                        </div>
                        <div id="emptyTaskState" class="py-12 flex flex-col items-center justify-center text-center px-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900">Nenhuma tarefa cadastrada</h3>
                            <p class="mt-1 text-sm text-gray-500">
                                Comece adicionando uma nova tarefa para organizar suas atividades.
                            </p>
                            <div class="mt-6">
                                <button id="emptyAddTaskBtn" class="btn-sinnergie text-white px-4 py-2 rounded-lg flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                                    </svg>
                                    Adicionar Tarefa
                                </button>
                            </div>
                        </div>
                    </div>
                </div>                <!-- Seção de Métricas -->
                <div id="metricasSection" class="max-w-7xl mx-auto hidden">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <!-- Total de Clientes -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-500 font-medium">Total de Clientes</p>
                                    <h3 class="text-2xl font-bold mt-1" id="totalClientsCount">0</h3>
                                </div>
                                <div class="h-12 w-12 rounded-full bg-red-100 flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" />
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-sm text-red-600 hover:text-red-800 font-medium" data-metric="clientDetail">Ver detalhes →</a>
                            </div>
                        </div>
                        
                        <!-- Total de Tarefas -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-500 font-medium">Total de Tarefas</p>
                                    <h3 class="text-2xl font-bold mt-1" id="totalTasksCount">0</h3>
                                </div>
                                <div class="h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-sm text-blue-600 hover:text-blue-800 font-medium" data-metric="taskDetail">Ver detalhes →</a>
                            </div>
                        </div>
                        
                        <!-- Tarefas Pendentes -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-500 font-medium">Tarefas Pendentes</p>
                                    <h3 class="text-2xl font-bold mt-1" id="pendingTasksCount">0</h3>
                                </div>
                                <div class="h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-sm text-yellow-600 hover:text-yellow-800 font-medium" data-metric="pendingDetail">Ver detalhes →</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gráficos -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h4 class="text-lg font-medium mb-4">Status dos Clientes</h4>
                            <div class="chart-container">
                                <canvas id="clientStatusChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h4 class="text-lg font-medium mb-4">Status das Tarefas</h4>
                            <div class="chart-container">
                                <canvas id="taskStatusChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Atividades Recentes -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h4 class="text-lg font-medium mb-4">Atividades Recentes</h4>
                        <div class="overflow-hidden">
                            <ul class="divide-y divide-gray-200" id="recentActivitiesList">
                                <!-- Será preenchido dinamicamente -->
                                <li class="py-3" id="noActivitiesMsg">
                                    <p class="text-sm text-gray-500">Nenhuma atividade recente registrada</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Seção de Configurações -->
                <div id="configuracoesSection" class="max-w-7xl mx-auto hidden">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Coluna lateral - menu de navegação -->
                        <div class="col-span-1">
                            <div class="bg-white rounded-lg shadow">
                                <div class="bg-gray-50 px-4 py-5 border-b border-gray-200 sm:px-6 rounded-t-lg">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">Configurações</h3>
                                </div>
                                <div class="p-4">
                                    <nav class="space-y-1">
                                        <a href="#" class="config-nav-item active bg-gray-50 text-red-700 hover:bg-gray-50 group rounded-md px-3 py-2 flex items-center text-sm font-medium" data-config="perfil">
                                            <span class="truncate">Perfil do Usuário</span>
                                        </a>
                                        <a href="#" class="config-nav-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group rounded-md px-3 py-2 flex items-center text-sm font-medium" data-config="usuarios">
                                            <span class="truncate">Gerenciar Usuários</span>
                                        </a>
                                        <a href="#" class="config-nav-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group rounded-md px-3 py-2 flex items-center text-sm font-medium" data-config="notificacoes">
                                            <span class="truncate">Notificações</span>
                                        </a>
                                        <a href="#" class="config-nav-item text-gray-600 hover:bg-gray-50 hover:text-gray-900 group rounded-md px-3 py-2 flex items-center text-sm font-medium" data-config="tema">
                                            <span class="truncate">Tema</span>
                                        </a>
                                    </nav>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Coluna principal - conteúdo da configuração -->
                        <div class="col-span-2">
                            <!-- Configuração de Perfil -->
                            <div id="configPerfil" class="bg-white rounded-lg shadow">
                                <div class="bg-gray-50 px-4 py-5 border-b border-gray-200 sm:px-6 rounded-t-lg">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">Perfil do Usuário</h3>
                                    <p class="mt-1 text-sm text-gray-500">Informações da sua conta</p>
                                </div>
                                <div class="p-6">
                                    <form id="profileForm">
                                        <div class="space-y-6">
                                            <div>
                                                <label for="fullName" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                                                <input type="text" name="fullName" id="fullName" value="Administrador" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm">
                                            </div>
                                            <div>
                                                <label for="emailAddress" class="block text-sm font-medium text-gray-700">E-mail</label>
                                                <input type="email" name="emailAddress" id="emailAddress" value="admin@sinnergie.com" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm">
                                            </div>
                                            <div>
                                                <label for="password" class="block text-sm font-medium text-gray-700">Nova Senha</label>
                                                <input type="password" name="password" id="password" placeholder="********" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm">
                                                <p class="mt-1 text-xs text-gray-500">Deixe em branco para manter a senha atual</p>
                                            </div>
                                            <div class="flex justify-end">
                                                <button type="submit" class="btn-sinnergie text-white px-4 py-2 rounded-md">Salvar Alterações</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <!-- Configuração de Usuários -->
                            <div id="configUsuarios" class="bg-white rounded-lg shadow hidden">
                                <div class="bg-gray-50 px-4 py-5 border-b border-gray-200 sm:px-6 rounded-t-lg">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">Gerenciar Usuários</h3>
                                    <p class="mt-1 text-sm text-gray-500">Adicione ou edite os usuários do sistema</p>
                                </div>
                                <div class="p-6">
                                    <button id="addUserBtn" class="btn-sinnergie text-white px-4 py-2 rounded-md mb-6 flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                                        </svg>
                                        Adicionar Usuário
                                    </button>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">E-mail</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Função</th>
                                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="usersTableBody" class="bg-white divide-y divide-gray-200">
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <div class="flex items-center">
                                                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                                                                <span class="text-gray-600 font-medium">A</span>
                                                            </div>
                                                            <div class="ml-4">
                                                                <div class="text-sm font-medium text-gray-900">Administrador</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <div class="text-sm text-gray-900">admin@sinnergie.com</div>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap">
                                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Admin</span>
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                                        <a href="#" class="text-indigo-600 hover:text-indigo-900 mr-3 edit-user" data-id="admin">Editar</a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Configuração de Notificações -->
                            <div id="configNotificacoes" class="bg-white rounded-lg shadow hidden">
                                <div class="bg-gray-50 px-4 py-5 border-b border-gray-200 sm:px-6 rounded-t-lg">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">Configurações de Notificações</h3>
                                    <p class="mt-1 text-sm text-gray-500">Personalize como deseja receber notificações</p>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-6">
                                        <div class="flex items-start">
                                            <div class="flex items-center h-5">
                                                <input id="notifyClients" name="notifyClients" type="checkbox" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded" checked>
                                            </div>
                                            <div class="ml-3 text-sm">
                                                <label for="notifyClients" class="font-medium text-gray-700">Novos clientes</label>
                                                <p class="text-gray-500">Receber notificações quando um novo cliente for adicionado</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <div class="flex items-center h-5">
                                                <input id="notifyTasks" name="notifyTasks" type="checkbox" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded" checked>
                                            </div>
                                            <div class="ml-3 text-sm">
                                                <label for="notifyTasks" class="font-medium text-gray-700">Novas tarefas</label>
                                                <p class="text-gray-500">Receber notificações quando uma nova tarefa for criada</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <div class="flex items-center h-5">
                                                <input id="notifyTaskReminders" name="notifyTaskReminders" type="checkbox" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded" checked>
                                            </div>
                                            <div class="ml-3 text-sm">
                                                <label for="notifyTaskReminders" class="font-medium text-gray-700">Lembretes de tarefas</label>
                                                <p class="text-gray-500">Receber lembretes para tarefas próximas do prazo</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <div class="flex items-center h-5">
                                                <input id="notifyEmail" name="notifyEmail" type="checkbox" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded">
                                            </div>
                                            <div class="ml-3 text-sm">
                                                <label for="notifyEmail" class="font-medium text-gray-700">Enviar por e-mail</label>
                                                <p class="text-gray-500">Além das notificações no sistema, enviar também por e-mail</p>
                                            </div>
                                        </div>
                                        <div>
                                            <label for="notificationEmail" class="block text-sm font-medium text-gray-700">Email para notificações</label>
                                            <input type="email" id="notificationEmail" name="notificationEmail" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm" placeholder="email@exemplo.com">
                                        </div>
                                        <div class="mt-4">
                                            <label for="notificationWhatsApp" class="block text-sm font-medium text-gray-700">WhatsApp para notificações</label>
                                            <input type="tel" id="notificationWhatsApp" name="notificationWhatsApp" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm" placeholder="(00) 00000-0000">
                                        </div>
                                        <div class="mt-4">
                                            <label for="reminderTime" class="block text-sm font-medium text-gray-700">Tempo de antecedência para lembretes</label>
                                            <select id="reminderTime" name="reminderTime" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm">
                                                <option value="10">10 minutos antes</option>
                                                <option value="20">20 minutos antes</option>
                                                <option value="30">30 minutos antes</option>
                                                <option value="60">1 hora antes</option>
                                                <option value="24">24 horas antes</option>
                                                <option value="48" selected>48 horas antes</option>
                                                <option value="72">72 horas antes</option>
                                                <option value="168">1 semana antes</option>
                                            </select>
                                        </div>
                                        <div class="flex justify-end">
                                            <button type="button" id="saveNotificationSettings" class="btn-sinnergie text-white px-4 py-2 rounded-md">Salvar Configurações</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Configuração de Tema -->
                            <div id="configTema" class="bg-white rounded-lg shadow hidden">
                                <div class="bg-gray-50 px-4 py-5 border-b border-gray-200 sm:px-6 rounded-t-lg">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">Configurações de Tema</h3>
                                    <p class="mt-1 text-sm text-gray-500">Personalize a aparência do sistema</p>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700">Modo</label>
                                            <div class="mt-2 space-x-4 flex">
                                                <div class="flex items-center">
                                                    <input id="lightTheme" name="theme" type="radio" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300" value="light" checked>
                                                    <label for="lightTheme" class="ml-3 block text-sm font-medium text-gray-700">
                                                        Claro
                                                    </label>
                                                </div>
                                                <div class="flex items-center">
                                                    <input id="darkTheme" name="theme" type="radio" class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300" value="dark">
                                                    <label for="darkTheme" class="ml-3 block text-sm font-medium text-gray-700">
                                                        Escuro
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex justify-end">
                                            <button type="button" id="saveThemeSettings" class="btn-sinnergie text-white px-4 py-2 rounded-md">Aplicar Tema</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Adicionar Modal de Cliente -->
    <div id="addClientModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg">
                <h3 class="text-lg font-medium">Adicionar Novo Cliente</h3>
            </div>
            <form id="addClientForm" class="p-6">
                <div class="space-y-4">
                    <div>
                        <label for="nome" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                        <input type="text" id="nome" name="nome" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">E-mail</label>
                        <input type="email" id="email" name="email" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                    <div>
                        <label for="telefone" class="block text-sm font-medium text-gray-700">Telefone</label>
                        <input type="tel" id="telefone" name="telefone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                    <div>
                        <label for="empresa" class="block text-sm font-medium text-gray-700">Empresa</label>
                        <input type="text" id="empresa" name="empresa" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                    </div>
                    <div>
                        <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
                        <select id="status" name="status" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="Ativo">Ativo</option>
                            <option value="Inativo">Inativo</option>
                            <option value="Pendente">Pendente</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="cancelAddClient" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>    <!-- Importar CSV Modal -->
    <div id="importCSVModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg">
                <h3 class="text-lg font-medium">Importar Clientes (CSV)</h3>
            </div>
            <div class="p-6">
                <div class="mb-4">
                    <p class="text-sm text-gray-600">
                        Selecione um arquivo CSV para importar seus clientes. O arquivo deve conter as colunas: nome, email, telefone, empresa e status.
                    </p>
                </div>
                <div class="mt-4 flex items-center justify-center w-full">
                    <label class="w-full flex flex-col items-center px-4 py-6 bg-white text-gray-500 rounded-lg shadow-lg tracking-wide border border-dashed border-gray-300 cursor-pointer hover:bg-gray-50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                        <span class="mt-2 text-base">Selecione um arquivo CSV</span>
                        <input id="csvFileInput" type="file" class="hidden" accept=".csv" />
                    </label>
                </div>
                <div id="csvFileName" class="mt-3 text-sm text-center text-gray-600 hidden">
                    Arquivo selecionado: <span class="font-medium"></span>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="cancelImportCSV" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Cancelar
                    </button>
                    <button type="button" id="confirmImportCSV" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900" disabled>
                        Importar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Exibir/Editar Modal do Cliente -->
    <div id="viewClientModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg flex justify-between items-center">
                <h3 class="text-lg font-medium">Detalhes do Cliente</h3>
                <button id="editClientToggle" class="text-white hover:text-gray-200 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                    </svg>
                </button>
            </div>
            <form id="viewClientForm" class="p-6">
                <input type="hidden" id="clientId">
                <div class="space-y-4">
                    <div>
                        <label for="viewName" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                        <input type="text" id="viewName" name="viewName" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly>
                    </div>
                    <div>
                        <label for="viewEmail" class="block text-sm font-medium text-gray-700">E-mail</label>
                        <input type="email" id="viewEmail" name="viewEmail" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly>
                    </div>
                    <div>
                        <label for="viewPhone" class="block text-sm font-medium text-gray-700">Telefone</label>
                        <input type="tel" id="viewPhone" name="viewPhone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly>
                    </div>
                    <div>
                        <label for="viewCompany" class="block text-sm font-medium text-gray-700">Empresa</label>
                        <input type="text" id="viewCompany" name="viewCompany" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly>
                    </div>
                    <div>
                        <label for="viewStatus" class="block text-sm font-medium text-gray-700">Status</label>
                        <select id="viewStatus" name="viewStatus" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" disabled>
                            <option value="Ativo">Ativo</option>
                            <option value="Inativo">Inativo</option>
                            <option value="Pendente">Pendente</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6 flex justify-between">
                    <button type="button" id="deleteClient" class="bg-white py-2 px-4 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        Excluir
                    </button>
                    <div class="flex space-x-3">
                        <button type="button" id="closeViewClient" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                            Fechar
                        </button>
                        <button type="submit" id="saveClientChanges" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900 hidden">
                            Salvar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Confirmação de Excluir Cliente -->
    <div id="deleteConfirmModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="p-6">
                <div class="flex items-center justify-center mb-4">
                    <div class="bg-red-100 rounded-full p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                    </div>
                </div>
                <h3 class="text-lg font-medium text-gray-900 text-center mb-2">Confirmar exclusão</h3>
                <p class="text-sm text-gray-500 text-center">
                    Tem certeza de que deseja excluir este cliente? Esta ação não pode ser desfeita.
                </p>
                <div class="mt-6 flex justify-center space-x-3">
                    <button type="button" id="cancelDelete" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Cancelar
                    </button>
                    <button type="button" id="confirmDelete" class="bg-red-600 text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        Excluir
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Exibir/Editar Modal da Tarefa -->
    <div id="viewTaskModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg flex justify-between items-center">
                <h3 class="text-lg font-medium">Detalhes da Tarefa</h3>
                <button id="editTaskToggle" class="text-white hover:text-gray-200 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                    </svg>
                </button>
            </div>
            <form id="viewTaskForm" class="p-6">
                <input type="hidden" id="taskIdView">
                <div class="space-y-4">
                    <div>
                        <label for="viewTaskTitle" class="block text-sm font-medium text-gray-700">Título da Tarefa</label>
                        <input type="text" id="viewTaskTitle" name="viewTaskTitle" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly>
                    </div>
                    <div>
                        <label for="viewTaskClient" class="block text-sm font-medium text-gray-700">Cliente</label>
                        <select id="viewTaskClient" name="viewTaskClient" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" disabled>
                            <!-- Opções serão preenchidas dinamicamente -->
                        </select>
                    </div>
                    <div>
                        <label for="viewTaskDescription" class="block text-sm font-medium text-gray-700">Descrição</label>
                        <textarea id="viewTaskDescription" name="viewTaskDescription" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly></textarea>
                    </div>
                    <div>
                        <label for="viewTaskDueDate" class="block text-sm font-medium text-gray-700">Data Limite</label>
                        <input type="date" id="viewTaskDueDate" name="viewTaskDueDate" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly>
                    </div>
                    <div>
                        <label for="viewTaskDueTime" class="block text-sm font-medium text-gray-700">Hora Limite</label>
                        <input type="time" id="viewTaskDueTime" name="viewTaskDueTime" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" readonly>
                    </div>
                    <div>
                        <label for="viewTaskPriority" class="block text-sm font-medium text-gray-700">Prioridade</label>
                        <select id="viewTaskPriority" name="viewTaskPriority" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" disabled>
                            <option value="Baixa">Baixa</option>
                            <option value="Média">Média</option>
                            <option value="Alta">Alta</option>
                        </select>
                    </div>
                    <div>
                        <label for="viewTaskStatus" class="block text-sm font-medium text-gray-700">Status</label>
                        <select id="viewTaskStatus" name="viewTaskStatus" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" disabled>
                            <option value="Pendente">Pendente</option>
                            <option value="Em Andamento">Em Andamento</option>
                            <option value="Concluída">Concluída</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6 flex justify-between">
                    <button type="button" id="deleteTask" class="bg-white py-2 px-4 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        Excluir
                    </button>
                    <div class="flex space-x-3">
                        <button type="button" id="closeViewTask" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                            Fechar
                        </button>
                        <button type="submit" id="saveTaskChanges" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900 hidden">
                            Salvar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Confirmação de Excluir Tarefa -->
    <div id="deleteTaskConfirmModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="p-6">
                <div class="flex items-center justify-center mb-4">
                    <div class="bg-red-100 rounded-full p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                    </div>
                </div>
                <h3 class="text-lg font-medium text-gray-900 text-center mb-2">Confirmar exclusão</h3>
                <p class="text-sm text-gray-500 text-center">
                    Tem certeza de que deseja excluir esta tarefa? Esta ação não pode ser desfeita.
                </p>
                <div class="mt-6 flex justify-center space-x-3">
                    <button type="button" id="cancelDeleteTask" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Cancelar
                    </button>
                    <button type="button" id="confirmDeleteTask" class="bg-red-600 text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        Excluir
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Adicionar Tarefa -->
    <div id="addTaskModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg">
                <h3 class="text-lg font-medium">Adicionar Nova Tarefa</h3>
            </div>
            <form id="addTaskForm" class="p-6">
                <div class="space-y-4">
                    <div>
                        <label for="taskTitle" class="block text-sm font-medium text-gray-700">Título da Tarefa</label>
                        <input type="text" id="taskTitle" name="taskTitle" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                    <div>
                        <label for="taskClient" class="block text-sm font-medium text-gray-700">Cliente</label>
                        <select id="taskClient" name="taskClient" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                            <option value="">Selecione um cliente</option>
                        </select>
                    </div>
                    <div>
                        <label for="taskDescription" class="block text-sm font-medium text-gray-700">Descrição</label>
                        <textarea id="taskDescription" name="taskDescription" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900"></textarea>
                    </div>
                    <div>
                        <label for="taskDueDate" class="block text-sm font-medium text-gray-700">Data Limite</label>
                        <input type="date" id="taskDueDate" name="taskDueDate" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                    <div>
                        <label for="taskDueTime" class="block text-sm font-medium text-gray-700">Hora Limite</label>
                        <input type="time" id="taskDueTime" name="taskDueTime" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                    </div>
                    <div>
                        <label for="taskPriority" class="block text-sm font-medium text-gray-700">Prioridade</label>
                        <select id="taskPriority" name="taskPriority" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="Baixa">Baixa</option>
                            <option value="Média" selected>Média</option>
                            <option value="Alta">Alta</option>
                        </select>
                    </div>
                    <div>
                        <label for="taskStatus" class="block text-sm font-medium text-gray-700">Status</label>
                        <select id="taskStatus" name="taskStatus" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="Pendente" selected>Pendente</option>
                            <option value="Em Andamento">Em Andamento</option>
                            <option value="Concluída">Concluída</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="cancelAddTask" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Filtro de Clientes -->
    <div id="filterClientModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg">
                <h3 class="text-lg font-medium">Filtrar Clientes</h3>
            </div>
            <div class="p-6">
                <div class="space-y-4">
                    <div>
                        <label for="filterStatus" class="block text-sm font-medium text-gray-700">Status</label>
                        <select id="filterStatus" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="">Todos</option>
                            <option value="Ativo">Ativo</option>
                            <option value="Inativo">Inativo</option>
                            <option value="Pendente">Pendente</option>
                        </select>
                    </div>
                    <div>
                        <label for="filterCompany" class="block text-sm font-medium text-gray-700">Empresa</label>
                        <input type="text" id="filterCompany" placeholder="Digite o nome da empresa" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="clearFilter" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50">
                        Limpar
                    </button>
                    <button type="button" id="applyFilter" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium">
                        Aplicar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Filtro de Tarefas -->
    <div id="filterTaskModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg">
                <h3 class="text-lg font-medium">Filtrar Tarefas</h3>
            </div>
            <div class="p-6">
                <div class="space-y-4">
                    <div>
                        <label for="filterTaskStatus" class="block text-sm font-medium text-gray-700">Status</label>
                        <select id="filterTaskStatus" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="">Todos</option>
                            <option value="Pendente">Pendente</option>
                            <option value="Em Andamento">Em Andamento</option>
                            <option value="Concluída">Concluída</option>
                        </select>
                    </div>
                    <div>
                        <label for="filterTaskPriority" class="block text-sm font-medium text-gray-700">Prioridade</label>
                        <select id="filterTaskPriority" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="">Todas</option>
                            <option value="Baixa">Baixa</option>
                            <option value="Média">Média</option>
                            <option value="Alta">Alta</option>
                        </select>
                    </div>
                    <div>
                        <label for="filterTaskClient" class="block text-sm font-medium text-gray-700">Cliente</label>
                        <select id="filterTaskClient" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="">Todos</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="clearTaskFilter" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50">
                        Limpar
                    </button>
                    <button type="button" id="applyTaskFilter" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium">
                        Aplicar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Adicionar Usuário -->
    <div id="addUserModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-md mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg">
                <h3 class="text-lg font-medium">Adicionar Usuário</h3>
            </div>
            <form id="addUserForm" class="p-6">
                <div class="space-y-4">
                    <div>
                        <label for="userName" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                        <input type="text" id="userName" name="userName" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                    <div>
                        <label for="userEmail" class="block text-sm font-medium text-gray-700">E-mail</label>
                        <input type="email" id="userEmail" name="userEmail" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                    <div>
                        <label for="userRole" class="block text-sm font-medium text-gray-700">Função</label>
                        <select id="userRole" name="userRole" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900">
                            <option value="User">Usuário</option>
                            <option value="Admin">Administrador</option>
                        </select>
                    </div>
                    <div>
                        <label for="userPassword" class="block text-sm font-medium text-gray-700">Senha</label>
                        <input type="password" id="userPassword" name="userPassword" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-900 focus:border-red-900" required>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" id="cancelAddUser" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-sinnergie text-white py-2 px-4 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                        Adicionar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Painel de Notificações -->
    <div id="notificationPanel" class="fixed top-16 right-4 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50 hidden">
        <div class="p-4 border-b border-gray-200">
            <h3 class="text-lg font-medium text-gray-900">Notificações</h3>
        </div>
        <div class="max-h-96 overflow-y-auto">
            <div id="notificationList" class="divide-y divide-gray-200">
                <!-- Notificações serão adicionadas dinamicamente -->
                <div class="p-4 text-center text-gray-500 text-sm" id="noNotifications">
                    Nenhuma notificação
                </div>
            </div>
        </div>
        <div class="p-3 border-t border-gray-200 flex justify-between">
            <button id="viewAllNotifications" class="text-sm text-blue-600 hover:text-blue-800">Ver todas</button>
            <button id="clearAllNotifications" class="text-sm text-red-600 hover:text-red-800">Limpar todas</button>
        </div>
    </div>

    <!-- Modal de Notificações Completas -->
    <div id="allNotificationsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 transform scale-95 opacity-0">
            <div class="sinnergie-gradient text-white px-6 py-4 rounded-t-lg">
                <h3 class="text-lg font-medium">Todas as Notificações</h3>
            </div>
            <div class="p-6 max-h-96 overflow-y-auto">
                <div id="allNotificationsList" class="space-y-4">
                    <!-- Notificações serão adicionadas dinamicamente -->
                </div>
            </div>
            <div class="p-4 border-t border-gray-200 flex justify-end">
                <button id="closeAllNotifications" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-900">
                    Fechar
                </button>
            </div>
        </div>
    </div>    <script>
        // Armazenamento de dados
        let clients = [];
        let tasks = [];
        let activities = [];
        let notifications = [];
        let users = [
            {
                id: 'admin',
                name: 'Administrador',
                email: 'admin@sinnergie.com',
                role: 'Admin'
            }
        ];
        let currentClientId = null;
        let currentTaskId = null;
        let currentFilter = {};
        let currentTaskFilter = {};
        let isFiltered = false;
        let isTaskFiltered = false;
        
        // Elementos DOM - Navegação e UI
        const navItems = document.querySelectorAll('.nav-item');
        const sections = document.querySelectorAll('[id$="Section"]');
        const pageTitle = document.getElementById('pageTitle');
        const globalSearch = document.getElementById('globalSearch');
        const mainContainer = document.getElementById('mainContainer');
        const notificationBtn = document.getElementById('notificationBtn');
        const notificationBadge = document.getElementById('notificationBadge');
        const notificationPanel = document.getElementById('notificationPanel');
        const notificationList = document.getElementById('notificationList');
        const noNotifications = document.getElementById('noNotifications');
        const clearAllNotifications = document.getElementById('clearAllNotifications');
        
        // Elementos DOM - Clientes
        const addClientBtn = document.getElementById('addClientBtn');
        const emptyAddClientBtn = document.getElementById('emptyAddClientBtn');
        const importCSVBtn = document.getElementById('importCSVBtn');
        const emptyImportCSVBtn = document.getElementById('emptyImportCSVBtn');
        const filterClientsBtn = document.getElementById('filterClientsBtn');
        const exportClientsBtn = document.getElementById('exportClientsBtn');
        const addClientModal = document.getElementById('addClientModal');
        const addClientForm = document.getElementById('addClientForm');
        const cancelAddClient = document.getElementById('cancelAddClient');
        const importCSVModal = document.getElementById('importCSVModal');
        const csvFileInput = document.getElementById('csvFileInput');
        const csvFileName = document.getElementById('csvFileName');
        const cancelImportCSV = document.getElementById('cancelImportCSV');
        const confirmImportCSV = document.getElementById('confirmImportCSV');
        const clientTableBody = document.getElementById('clientTableBody');
        const emptyState = document.getElementById('emptyState');
        const viewClientModal = document.getElementById('viewClientModal');
        const viewClientForm = document.getElementById('viewClientForm');
        const editClientToggle = document.getElementById('editClientToggle');
        const closeViewClient = document.getElementById('closeViewClient');
        const saveClientChanges = document.getElementById('saveClientChanges');
        const deleteClient = document.getElementById('deleteClient');
        const deleteConfirmModal = document.getElementById('deleteConfirmModal');
        const cancelDelete = document.getElementById('cancelDelete');
        const confirmDelete = document.getElementById('confirmDelete');
        const viewTaskModal = document.getElementById('viewTaskModal');
        const viewTaskForm = document.getElementById('viewTaskForm');
        const editTaskToggle = document.getElementById('editTaskToggle');
        const closeViewTask = document.getElementById('closeViewTask');
        const saveTaskChanges = document.getElementById('saveTaskChanges');
        const deleteTask = document.getElementById('deleteTask');
        const deleteTaskConfirmModal = document.getElementById('deleteTaskConfirmModal');
        const cancelDeleteTask = document.getElementById('cancelDeleteTask');
        const confirmDeleteTask = document.getElementById('confirmDeleteTask');
        const filterClientModal = document.getElementById('filterClientModal');
        const filterStatus = document.getElementById('filterStatus');
        const filterCompany = document.getElementById('filterCompany');
        const clearFilter = document.getElementById('clearFilter');
        const applyFilter = document.getElementById('applyFilter');
        
        // Elementos DOM - Tarefas
        const addTaskBtn = document.getElementById('addTaskBtn');
        const emptyAddTaskBtn = document.getElementById('emptyAddTaskBtn');
        const filterTasksBtn = document.getElementById('filterTasksBtn');
        const addTaskModal = document.getElementById('addTaskModal');
        const addTaskForm = document.getElementById('addTaskForm');
        const cancelAddTask = document.getElementById('cancelAddTask');
        const taskClient = document.getElementById('taskClient');
        const taskTableBody = document.getElementById('taskTableBody');
        const emptyTaskState = document.getElementById('emptyTaskState');
        const filterTaskModal = document.getElementById('filterTaskModal');
        const filterTaskStatus = document.getElementById('filterTaskStatus');
        const filterTaskPriority = document.getElementById('filterTaskPriority');
        const filterTaskClient = document.getElementById('filterTaskClient');
        const clearTaskFilter = document.getElementById('clearTaskFilter');
        const applyTaskFilter = document.getElementById('applyTaskFilter');
        
        // Elementos DOM - Métricas
        const totalClientsCount = document.getElementById('totalClientsCount');
        const totalTasksCount = document.getElementById('totalTasksCount');
        const pendingTasksCount = document.getElementById('pendingTasksCount');
        const clientStatusChart = document.getElementById('clientStatusChart');
        const taskStatusChart = document.getElementById('taskStatusChart');
        const recentActivitiesList = document.getElementById('recentActivitiesList');
        const noActivitiesMsg = document.getElementById('noActivitiesMsg');
        const metricLinks = document.querySelectorAll('[data-metric]');
        
        // Elementos DOM - Configurações
        const configNavItems = document.querySelectorAll('.config-nav-item');
        const configSections = document.querySelectorAll('[id^="config"]');
        const profileForm = document.getElementById('profileForm');
        const addUserBtn = document.getElementById('addUserBtn');
        const addUserModal = document.getElementById('addUserModal');
        const addUserForm = document.getElementById('addUserForm');
        const cancelAddUser = document.getElementById('cancelAddUser');
        const usersTableBody = document.getElementById('usersTableBody');
        const saveNotificationSettings = document.getElementById('saveNotificationSettings');
        const themeRadios = document.querySelectorAll('input[name="theme"]');
        const saveThemeSettings = document.getElementById('saveThemeSettings');
        
        // Funções de utilidade para modais
        function openModal(modal) {
            modal.classList.remove('hidden');
            setTimeout(() => {
                const modalContent = modal.querySelector('.modal');
                modalContent.classList.remove('opacity-0', 'scale-95');
                modalContent.classList.add('opacity-100', 'scale-100');
            }, 10);
        }
        
        function closeModal(modal) {
            const modalContent = modal.querySelector('.modal');
            modalContent.classList.remove('opacity-100', 'scale-100');
            modalContent.classList.add('opacity-0', 'scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }
        
        // Navegação entre seções
        function showSection(sectionId) {
            // Atualizar navegação
            navItems.forEach(item => {
                if (item.dataset.section === sectionId) {
                    item.classList.add('active-nav');
                } else {
                    item.classList.remove('active-nav');
                }
            });
            
            // Exibir seção correta
            sections.forEach(section => {
                if (section.id === `${sectionId}Section`) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
            
            // Atualizar título da página
            switch (sectionId) {
                case 'clientes':
                    pageTitle.textContent = 'Gestão de Clientes';
                    break;
                case 'tarefas':
                    pageTitle.textContent = 'Gestão de Tarefas';
                    updateTaskClientSelects();
                    updateTaskTable();
                    break;
                case 'metricas':
                    pageTitle.textContent = 'Métricas';
                    updateMetrics();
                    break;
                case 'configuracoes':
                    pageTitle.textContent = 'Configurações';
                    break;
            }
            
            // Adicionar à atividade recente
            if (['clientes', 'tarefas', 'metricas', 'configuracoes'].includes(sectionId)) {
                addActivity(`Acessou a seção ${pageTitle.textContent}`);
            }
        }
        
        // Navegação de configurações
        function showConfigSection(sectionId) {
            console.log('Mostrando seção de configuração:', sectionId);
            
            // Atualizar na navegação lateral
            configNavItems.forEach(item => {
                if (item.dataset.config === sectionId) {
                    item.classList.add('active', 'bg-gray-50', 'text-red-700');
                    item.classList.remove('text-gray-600');
                } else {
                    item.classList.remove('active', 'bg-gray-50', 'text-red-700');
                    item.classList.add('text-gray-600');
                }
            });
            
            // Mostrar a seção correta (e esconder as outras)
            const targetSectionId = `config${sectionId.charAt(0).toUpperCase() + sectionId.slice(1)}`;
            
            configSections.forEach(section => {
                if (section.id === targetSectionId) {
                    section.classList.remove('hidden');
                    console.log('Mostrando seção:', section.id);
                } else {
                    section.classList.add('hidden');
                }
            });
            
            // Verificação extra para garantir que a seção esteja visível
            setTimeout(() => {
                const targetSection = document.getElementById(targetSectionId);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                    console.log('Verificação extra - mostrando:', targetSectionId);
                }
            }, 100);
        }
        
        // Função para atualizar a tabela de clientes
        function updateClientTable() {
            let clientsToShow = clients;
            
            // Aplicar filtro, se necessário
            if (isFiltered) {
                clientsToShow = clients.filter(client => {
                    let statusMatch = true;
                    let companyMatch = true;
                    
                    if (currentFilter.status) {
                        statusMatch = client.status === currentFilter.status;
                    }
                    
                    if (currentFilter.company) {
                        companyMatch = client.company && client.company.toLowerCase().includes(currentFilter.company.toLowerCase());
                    }
                    
                    return statusMatch && companyMatch;
                });
            }
            
            // Aplicar busca global, se necessário
            const searchTerm = globalSearch.value.trim().toLowerCase();
            if (searchTerm) {
                clientsToShow = clientsToShow.filter(client => {
                    return (
                        client.nome.toLowerCase().includes(searchTerm) ||
                        client.email.toLowerCase().includes(searchTerm) ||
                        client.telefone.toLowerCase().includes(searchTerm) ||
                        (client.company && client.company.toLowerCase().includes(searchTerm))
                    );
                });
            }
            
            if (clientsToShow.length === 0) {
                clientTableBody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            clientTableBody.innerHTML = '';
            
            clientsToShow.forEach(client => {
                const row = document.createElement('tr');
                row.className = 'table-row';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                                <span class="text-gray-600 font-medium">${client.nome.charAt(0).toUpperCase()}</span>
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">${client.nome}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${client.email}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${client.telefone}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${client.company || '-'}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusClass(client.status)}">
                            ${client.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button data-id="${client.id}" class="view-client text-indigo-600 hover:text-indigo-900 mr-3">Ver</button>
                    </td>
                `;
                clientTableBody.appendChild(row);
            });
            
            // Adicionar ouvintes de eventos para os botões de visualização
            document.querySelectorAll('.view-client').forEach(button => {
                button.addEventListener('click', function() {
                    const clientId = this.getAttribute('data-id');
                    viewClient(clientId);
                });
            });
        }
        
        // Função para atualizar a tabela de tarefas
        function updateTaskTable() {
            let tasksToShow = tasks;
            
            // Aplicar filtro, se necessário
            if (isTaskFiltered) {
                tasksToShow = tasks.filter(task => {
                    let statusMatch = true;
                    let priorityMatch = true;
                    let clientMatch = true;
                    
                    if (currentTaskFilter.status) {
                        statusMatch = task.status === currentTaskFilter.status;
                    }
                    
                    if (currentTaskFilter.priority) {
                        priorityMatch = task.priority === currentTaskFilter.priority;
                    }
                    
                    if (currentTaskFilter.clientId) {
                        clientMatch = task.clientId === currentTaskFilter.clientId;
                    }
                    
                    return statusMatch && priorityMatch && clientMatch;
                });
            }
            
            // Aplicar busca global, se necessário
            const searchTerm = globalSearch.value.trim().toLowerCase();
            if (searchTerm) {
                tasksToShow = tasksToShow.filter(task => {
                    const client = clients.find(c => c.id === task.clientId);
                    const clientName = client ? client.nome : '';
                    
                    return (
                        task.title.toLowerCase().includes(searchTerm) ||
                        (task.description && task.description.toLowerCase().includes(searchTerm)) ||
                        clientName.toLowerCase().includes(searchTerm)
                    );
                });
            }
            
            if (tasksToShow.length === 0) {
                taskTableBody.innerHTML = '';
                emptyTaskState.classList.remove('hidden');
                return;
            }
            
            emptyTaskState.classList.add('hidden');
            taskTableBody.innerHTML = '';
            
            tasksToShow.forEach(task => {
                const client = clients.find(c => c.id === task.clientId);
                const clientName = client ? client.nome : 'Cliente removido';
                
                const row = document.createElement('tr');
                row.className = 'table-row';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${task.title}</div>
                        <div class="text-xs text-gray-500">${task.description || ''}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${clientName}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${formatDate(task.dueDate)}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getPriorityClass(task.priority)}">
                            ${task.priority}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getTaskStatusClass(task.status)}">
                            ${task.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button data-id="${task.id}" class="view-task text-indigo-600 hover:text-indigo-900 mr-3">Ver</button>
                    </td>
                `;
                taskTableBody.appendChild(row);
            });
            
            // Adicionar ouvintes de eventos para os botões de visualização
            document.querySelectorAll('.view-task').forEach(button => {
                button.addEventListener('click', function() {
                    const taskId = this.getAttribute('data-id');
                    viewTask(taskId);
                });
            });
        }
        
        // Atualizar selects de clientes nas tarefas
        function updateTaskClientSelects() {
            // Limpar opções atuais
            if (taskClient) {
                taskClient.innerHTML = '<option value="">Selecione um cliente</option>';
            }
            if (filterTaskClient) {
                filterTaskClient.innerHTML = '<option value="">Todos</option>';
            }
            if (document.getElementById('viewTaskClient')) {
                document.getElementById('viewTaskClient').innerHTML = '<option value="">Selecione um cliente</option>';
            }
            
            // Adicionar todos os clientes (não apenas ativos) como opções
            clients.forEach(client => {
                if (taskClient) {
                    const option = document.createElement('option');
                    option.value = client.id;
                    option.textContent = `${client.nome} (${client.status})`;
                    taskClient.appendChild(option);
                }
                
                if (filterTaskClient) {
                    const filterOption = document.createElement('option');
                    filterOption.value = client.id;
                    filterOption.textContent = `${client.nome} (${client.status})`;
                    filterTaskClient.appendChild(filterOption);
                }
                
                if (document.getElementById('viewTaskClient')) {
                    const viewOption = document.createElement('option');
                    viewOption.value = client.id;
                    viewOption.textContent = `${client.nome} (${client.status})`;
                    document.getElementById('viewTaskClient').appendChild(viewOption);
                }
            });
            
            console.log('Atualizados selects de clientes:', clients.length, 'clientes disponíveis');
        }
        
        // Função para atualizar as métricas
        function updateMetrics() {
            // Atualizar contadores
            totalClientsCount.textContent = clients.length;
            totalTasksCount.textContent = tasks.length;
            
            const pendingTasks = tasks.filter(task => task.status === 'Pendente');
            pendingTasksCount.textContent = pendingTasks.length;
            
            // Criar gráfico de status de clientes
            updateClientStatusChart();
            
            // Criar gráfico de status de tarefas
            updateTaskStatusChart();
            
            // Atualizar lista de atividades recentes
            updateActivitiesList();
        }
        
        // Atualizar gráfico de status de clientes
        function updateClientStatusChart() {
            const statusCounts = {
                'Ativo': 0,
                'Inativo': 0,
                'Pendente': 0
            };
            
            clients.forEach(client => {
                statusCounts[client.status]++;
            });
            
            if (window.clientChart) {
                window.clientChart.destroy();
            }
            
            window.clientChart = new Chart(clientStatusChart, {
                type: 'doughnut',
                data: {
                    labels: ['Ativo', 'Inativo', 'Pendente'],
                    datasets: [{
                        data: [statusCounts['Ativo'], statusCounts['Inativo'], statusCounts['Pendente']],
                        backgroundColor: ['#10B981', '#EF4444', '#F59E0B'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Atualizar gráfico de status de tarefas
        function updateTaskStatusChart() {
            const statusCounts = {
                'Pendente': 0,
                'Em Andamento': 0,
                'Concluída': 0
            };
            
            tasks.forEach(task => {
                statusCounts[task.status]++;
            });
            
            if (window.taskChart) {
                window.taskChart.destroy();
            }
            
            window.taskChart = new Chart(taskStatusChart, {
                type: 'doughnut',
                data: {
                    labels: ['Pendente', 'Em Andamento', 'Concluída'],
                    datasets: [{
                        data: [statusCounts['Pendente'], statusCounts['Em Andamento'], statusCounts['Concluída']],
                        backgroundColor: ['#F59E0B', '#3B82F6', '#10B981'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Função para adicionar uma nova atividade
        function addActivity(description) {
            const activity = {
                id: generateId(),
                description,
                date: new Date().toISOString()
            };
            
            activities.unshift(activity);
            
            // Manter apenas as 50 atividades mais recentes
            if (activities.length > 50) {
                activities = activities.slice(0, 50);
            }
            
            saveActivitiesToLocalStorage();
            
            // Atualizar lista de atividades se a seção de métricas estiver visível
            if (!document.getElementById('metricasSection').classList.contains('hidden')) {
                updateActivitiesList();
            }
        }
        
        // Atualizar lista de atividades recentes
        function updateActivitiesList() {
            if (activities.length === 0) {
                noActivitiesMsg.classList.remove('hidden');
                return;
            }
            
            noActivitiesMsg.classList.add('hidden');
            
            // Limpar lista atual, exceto a mensagem de "nenhuma atividade"
            const items = recentActivitiesList.querySelectorAll('li:not(#noActivitiesMsg)');
            items.forEach(item => item.remove());
            
            // Adicionar atividades recentes
            activities.slice(0, 10).forEach(activity => {
                const li = document.createElement('li');
                li.className = 'py-3';
                li.innerHTML = `
                    <div class="flex justify-between">
                        <p class="text-sm font-medium text-gray-900">${activity.description}</p>
                        <p class="text-sm text-gray-500">${formatDateTime(activity.date)}</p>
                    </div>
                `;
                recentActivitiesList.insertBefore(li, noActivitiesMsg);
            });
        }
        
        // Função para adicionar uma nova notificação
        function addNotification(title, message) {
            const notification = {
                id: generateId(),
                title,
                message,
                date: new Date().toISOString(),
                read: false
            };
            
            notifications.unshift(notification);
            
            // Manter apenas as 50 notificações mais recentes
            if (notifications.length > 50) {
                notifications = notifications.slice(0, 50);
            }
            
            saveNotificationsToLocalStorage();
            updateNotificationBadge();
            updateNotificationPanel();
        }
        
        // Atualizar badge de notificações
        function updateNotificationBadge() {
            const unreadCount = notifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                notificationBadge.classList.remove('hidden');
            } else {
                notificationBadge.classList.add('hidden');
            }
        }
        
        // Atualizar painel de notificações
        function updateNotificationPanel() {
            if (notifications.length === 0) {
                noNotifications.classList.remove('hidden');
                return;
            }
            
            noNotifications.classList.add('hidden');
            
            // Limpar lista atual, exceto a mensagem de "nenhuma notificação"
            const items = notificationList.querySelectorAll('div:not(#noNotifications)');
            items.forEach(item => item.remove());
            
            // Adicionar notificações
            notifications.forEach(notification => {
                const div = document.createElement('div');
                div.className = `p-4 ${notification.read ? 'bg-white' : 'bg-gray-50'}`;
                div.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-sm font-medium text-gray-900">${notification.title}</p>
                            <p class="text-sm text-gray-500 mt-1">${notification.message}</p>
                            <p class="text-xs text-gray-400 mt-1">${formatDateTime(notification.date)}</p>
                        </div>
                        <button data-id="${notification.id}" class="mark-read text-xs text-gray-400 hover:text-gray-600 ${notification.read ? 'hidden' : ''}">
                            Marcar como lida
                        </button>
                    </div>
                `;
                notificationList.insertBefore(div, noNotifications);
            });
            
            // Adicionar ouvintes de eventos para os botões de "marcar como lida"
            document.querySelectorAll('.mark-read').forEach(button => {
                button.addEventListener('click', function() {
                    const notificationId = this.getAttribute('data-id');
                    markNotificationAsRead(notificationId);
                });
            });
        }
        
        // Marcar notificação como lida
        function markNotificationAsRead(notificationId) {
            const index = notifications.findIndex(n => n.id === notificationId);
            if (index !== -1) {
                notifications[index].read = true;
                saveNotificationsToLocalStorage();
                updateNotificationBadge();
                updateNotificationPanel();
            }
        }
        
        // Marcar todas as notificações como lidas
        function markAllNotificationsAsRead() {
            notifications.forEach(notification => {
                notification.read = true;
            });
            
            saveNotificationsToLocalStorage();
            updateNotificationBadge();
            updateNotificationPanel();
        }
        
        // Limpar todas as notificações
        function clearNotifications() {
            notifications = [];
            saveNotificationsToLocalStorage();
            updateNotificationBadge();
            updateNotificationPanel();
        }
        
        // Função para gerar ID única
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        // Função para adicionar um novo cliente
        function addClient(clientData) {
            const newClient = {
                id: generateId(),
                ...clientData
            };
            
            clients.push(newClient);
            saveClientsToLocalStorage();
            updateClientTable();
            
            // Garantir que os selects de clientes sejam atualizados
            setTimeout(() => {
                updateTaskClientSelects();
            }, 100);
            
            // Adicionar à atividade recente
            addActivity(`Adicionou o cliente ${clientData.nome}`);
            
            // Adicionar notificação
            if (document.getElementById('notifyClients').checked) {
                addNotification('Novo Cliente', `${clientData.nome} foi adicionado ao sistema.`);
            }
            
            console.log('Cliente adicionado:', newClient);
        }
        
        // Função para visualizar um cliente
        function viewClient(clientId) {
            const client = clients.find(c => c.id === clientId);
            if (!client) return;
            
            currentClientId = clientId;
            document.getElementById('clientId').value = client.id;
            document.getElementById('viewName').value = client.nome;
            document.getElementById('viewEmail').value = client.email;
            document.getElementById('viewPhone').value = client.telefone;
            document.getElementById('viewCompany').value = client.company || '';
            document.getElementById('viewStatus').value = client.status;
            
            // Iniciar no modo de visualização
            setViewMode(true);
            openModal(viewClientModal);
            
            // Adicionar à atividade recente
            addActivity(`Visualizou o cliente ${client.nome}`);
        }
        
        // Função para alternar entre modo de visualização e edição
        function setViewMode(isViewMode) {
            const inputs = viewClientForm.querySelectorAll('input, select');
            inputs.forEach(input => {
                if (input.id !== 'clientId') {
                    input.readOnly = isViewMode;
                    if (input.tagName === 'SELECT') {
                        input.disabled = isViewMode;
                    }
                }
            });
            
            if (isViewMode) {
                saveClientChanges.classList.add('hidden');
            } else {
                saveClientChanges.classList.remove('hidden');
            }
        }
        
        // Função para atualizar um cliente
        function updateClient(clientId, updatedData) {
            const index = clients.findIndex(c => c.id === clientId);
            if (index !== -1) {
                const oldName = clients[index].nome;
                clients[index] = {
                    ...clients[index],
                    ...updatedData
                };
                saveClientsToLocalStorage();
                updateClientTable();
                updateTaskClientSelects();
                
                // Adicionar à atividade recente
                addActivity(`Atualizou o cliente ${oldName}`);
            }
        }
        
        // Função para excluir um cliente
        function deleteClientById(clientId) {
            const clientIndex = clients.findIndex(c => c.id === clientId);
            if (clientIndex !== -1) {
                const clientName = clients[clientIndex].nome;
                
                // Verificar se há tarefas associadas a este cliente
                const associatedTasks = tasks.filter(t => t.clientId === clientId);
                
                // Remover o cliente
                clients.splice(clientIndex, 1);
                saveClientsToLocalStorage();
                updateClientTable();
                updateTaskClientSelects();
                
                // Adicionar à atividade recente
                addActivity(`Excluiu o cliente ${clientName}`);
                
                // Adicionar notificação sobre tarefas afetadas
                if (associatedTasks.length > 0) {
                    addNotification(
                        'Cliente Removido com Tarefas',
                        `${clientName} foi removido. ${associatedTasks.length} tarefa(s) associada(s) precisam ser reatribuídas.`
                    );
                }
            }
        }
        
        // Função para adicionar uma nova tarefa
        function addTask(taskData) {
            const newTask = {
                id: generateId(),
                ...taskData
            };
            
            tasks.push(newTask);
            saveTasksToLocalStorage();
            updateTaskTable();
            
            // Adicionar à atividade recente
            const client = clients.find(c => c.id === taskData.clientId);
            const clientName = client ? client.nome : 'Cliente desconhecido';
            addActivity(`Adicionou a tarefa "${taskData.title}" para ${clientName}`);
            
            // Adicionar notificação
            if (document.getElementById('notifyTasks').checked) {
                addNotification('Nova Tarefa', `"${taskData.title}" foi adicionada para ${clientName}.`);
            }
        }
        
        // Função para visualizar uma tarefa
        function viewTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            currentTaskId = taskId;
            document.getElementById('taskIdView').value = task.id;
            document.getElementById('viewTaskTitle').value = task.title;
            document.getElementById('viewTaskClient').value = task.clientId;
            document.getElementById('viewTaskDescription').value = task.description || '';
            document.getElementById('viewTaskDueDate').value = task.dueDate;
            document.getElementById('viewTaskDueTime').value = task.dueTime || '00:00';
            document.getElementById('viewTaskPriority').value = task.priority;
            document.getElementById('viewTaskStatus').value = task.status;
            
            // Iniciar no modo de visualização
            setTaskViewMode(true);
            openModal(viewTaskModal);
            
            // Adicionar à atividade recente
            addActivity(`Visualizou a tarefa "${task.title}"`);
        }
        
        // Função para alternar entre modo de visualização e edição de tarefa
        function setTaskViewMode(isViewMode) {
            const inputs = viewTaskForm.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.id !== 'taskIdView') {
                    input.readOnly = isViewMode;
                    if (input.tagName === 'SELECT' || input.tagName === 'TEXTAREA') {
                        input.disabled = isViewMode;
                    }
                }
            });
            
            if (isViewMode) {
                saveTaskChanges.classList.add('hidden');
            } else {
                saveTaskChanges.classList.remove('hidden');
            }
        }
        
        // Função para atualizar uma tarefa
        function updateTask(taskId, updatedData) {
            const index = tasks.findIndex(t => t.id === taskId);
            if (index !== -1) {
                const oldTitle = tasks[index].title;
                tasks[index] = {
                    ...tasks[index],
                    ...updatedData
                };
                saveTasksToLocalStorage();
                updateTaskTable();
                
                // Adicionar à atividade recente
                addActivity(`Atualizou a tarefa "${oldTitle}"`);
                
                // Adicionar notificação
                addNotification('Tarefa Atualizada', `A tarefa "${updatedData.title}" foi atualizada.`);
            }
        }
        
        // Função para excluir uma tarefa
        function deleteTaskById(taskId) {
            const taskIndex = tasks.findIndex(t => t.id === taskId);
            if (taskIndex !== -1) {
                const taskTitle = tasks[taskIndex].title;
                
                // Remover a tarefa
                tasks.splice(taskIndex, 1);
                saveTasksToLocalStorage();
                updateTaskTable();
                
                // Adicionar à atividade recente
                addActivity(`Excluiu a tarefa "${taskTitle}"`);
                
                // Adicionar notificação
                addNotification('Tarefa Removida', `A tarefa "${taskTitle}" foi removida.`);
            }
        }
        
        // Funções para salvar e carregar dados do localStorage
        function saveClientsToLocalStorage() {
            localStorage.setItem('sinnergie_clients', JSON.stringify(clients));
        }
        
        function loadClientsFromLocalStorage() {
            const savedClients = localStorage.getItem('sinnergie_clients');
            if (savedClients) {
                clients = JSON.parse(savedClients);
                updateClientTable();
            }
        }
        
        function saveTasksToLocalStorage() {
            localStorage.setItem('sinnergie_tasks', JSON.stringify(tasks));
        }
        
        function loadTasksFromLocalStorage() {
            const savedTasks = localStorage.getItem('sinnergie_tasks');
            if (savedTasks) {
                tasks = JSON.parse(savedTasks);
            }
        }
        
        function saveActivitiesToLocalStorage() {
            localStorage.setItem('sinnergie_activities', JSON.stringify(activities));
        }
        
        function loadActivitiesFromLocalStorage() {
            const savedActivities = localStorage.getItem('sinnergie_activities');
            if (savedActivities) {
                activities = JSON.parse(savedActivities);
            }
        }
        
        function saveNotificationsToLocalStorage() {
            localStorage.setItem('sinnergie_notifications', JSON.stringify(notifications));
        }
        
        function loadNotificationsFromLocalStorage() {
            const savedNotifications = localStorage.getItem('sinnergie_notifications');
            if (savedNotifications) {
                notifications = JSON.parse(savedNotifications);
                updateNotificationBadge();
            }
        }
        
        function saveUsersToLocalStorage() {
            localStorage.setItem('sinnergie_users', JSON.stringify(users));
        }
        
        function loadUsersFromLocalStorage() {
            const savedUsers = localStorage.getItem('sinnergie_users');
            if (savedUsers) {
                users = JSON.parse(savedUsers);
            }
        }
        
        function saveSettingsToLocalStorage() {
            const settings = {
                theme: document.querySelector('input[name="theme"]:checked').value,
                notifications: {
                    clients: document.getElementById('notifyClients').checked,
                    tasks: document.getElementById('notifyTasks').checked,
                    reminders: document.getElementById('notifyTaskReminders').checked,
                    email: document.getElementById('notifyEmail').checked,
                    emailAddress: document.getElementById('notificationEmail').value,
                    whatsapp: document.getElementById('notificationWhatsApp').value,
                    reminderTime: document.getElementById('reminderTime').value
                }
            };
            
            // Verificar se há tarefas pendentes que precisam de notificação
            if (document.getElementById('notifyTaskReminders').checked) {
                const now = new Date();
                const reminderMinutes = parseInt(document.getElementById('reminderTime').value);
                
                tasks.forEach(task => {
                    if (task.status !== 'Concluída') {
                        const taskDueDate = new Date(`${task.dueDate}T${task.dueTime || '00:00'}`);
                        const timeDiff = taskDueDate.getTime() - now.getTime();
                        const minutesDiff = Math.floor(timeDiff / (1000 * 60));
                        
                        // Se a diferença estiver dentro do tempo de lembrete configurado
                        if (minutesDiff > 0 && minutesDiff <= reminderMinutes) {
                            const client = clients.find(c => c.id === task.clientId);
                            const clientName = client ? client.nome : 'Cliente removido';
                            
                            // Adicionar notificação de lembrete
                            addNotification(
                                'Lembrete de Tarefa',
                                `A tarefa "${task.title}" para ${clientName} vence em ${minutesDiff} minutos.`
                            );
                        }
                    }
                });
            }
            localStorage.setItem('sinnergie_settings', JSON.stringify(settings));
            console.log('Configurações salvas:', settings);
        }
        
        function loadSettingsFromLocalStorage() {
            const savedSettings = localStorage.getItem('sinnergie_settings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                
                // Aplicar tema
                if (settings.theme === 'dark') {
                    document.getElementById('darkTheme').checked = true;
                    applyTheme('dark');
                }
                
                // Aplicar configurações de notificação
                if (settings.notifications) {
                    document.getElementById('notifyClients').checked = settings.notifications.clients;
                    document.getElementById('notifyTasks').checked = settings.notifications.tasks;
                    document.getElementById('notifyTaskReminders').checked = settings.notifications.reminders;
                    document.getElementById('notifyEmail').checked = settings.notifications.email;
                    
                    if (settings.notifications.emailAddress) {
                        document.getElementById('notificationEmail').value = settings.notifications.emailAddress;
                    }
                    
                    if (settings.notifications.whatsapp) {
                        document.getElementById('notificationWhatsApp').value = settings.notifications.whatsapp;
                    }
                    
                    if (settings.notifications.reminderTime) {
                        document.getElementById('reminderTime').value = settings.notifications.reminderTime;
                    }
                }
                
                console.log('Configurações carregadas:', settings);
            }
        }
        
        // Função para processar arquivo CSV
        function processCSV(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const text = e.target.result;
                const rows = text.split('\n');
                const headers = rows[0].split(',').map(h => h.trim().toLowerCase());
                
                const nameIndex = headers.indexOf('nome');
                const emailIndex = headers.indexOf('email');
                const phoneIndex = headers.indexOf('telefone');
                const companyIndex = headers.indexOf('empresa');
                const statusIndex = headers.indexOf('status');
                
                if (nameIndex === -1 || emailIndex === -1 || phoneIndex === -1) {
                    alert('O arquivo CSV deve conter pelo menos as colunas: nome, email e telefone');
                    return;
                }
                
                let imported = 0;
                let newClients = [];
                
                for (let i = 1; i < rows.length; i++) {
                    if (!rows[i].trim()) continue;
                    
                    const values = rows[i].split(',').map(v => v.trim());
                    const client = {
                        id: generateId(),
                        nome: values[nameIndex],
                        email: values[emailIndex],
                        telefone: values[phoneIndex],
                        company: companyIndex !== -1 ? values[companyIndex] : '',
                        status: statusIndex !== -1 ? values[statusIndex] : 'Ativo'
                    };
                    
                    if (client.nome && client.email && client.telefone) {
                        clients.push(client);
                        newClients.push(client);
                        imported++;
                    }
                }
                
                // Salvar todos os clientes de uma vez
                saveClientsToLocalStorage();
                updateClientTable();
                
                // Forçar a atualização dos selects após o CSV ser processado
                console.log(`Importados ${imported} clientes por CSV`);
                updateTaskClientSelects();
                
                // Forçar uma segunda atualização após um intervalo para garantir
                setTimeout(() => {
                    console.log("Atualizando selects de clientes novamente após importação");
                    updateTaskClientSelects();
                }, 500);
                
                closeModal(importCSVModal);
                
                // Adicionar notificação
                if (imported > 0) {
                    addNotification('Importação Concluída', `${imported} cliente(s) importado(s) com sucesso.`);
                }
            };
            reader.readAsText(file);
        }
        
        // Função para exportar clientes
        function exportClients() {
            let clientsToExport = clients;
            
            // Aplicar filtro, se necessário
            if (isFiltered) {
                clientsToExport = clients.filter(client => {
                    let statusMatch = true;
                    let companyMatch = true;
                    
                    if (currentFilter.status) {
                        statusMatch = client.status === currentFilter.status;
                    }
                    
                    if (currentFilter.company) {
                        companyMatch = client.company && client.company.toLowerCase().includes(currentFilter.company.toLowerCase());
                    }
                    
                    return statusMatch && companyMatch;
                });
            }
            
            // Aplicar busca global, se necessário
            const searchTerm = globalSearch.value.trim().toLowerCase();
            if (searchTerm) {
                clientsToExport = clientsToExport.filter(client => {
                    return (
                        client.nome.toLowerCase().includes(searchTerm) ||
                        client.email.toLowerCase().includes(searchTerm) ||
                        client.telefone.toLowerCase().includes(searchTerm) ||
                        (client.company && client.company.toLowerCase().includes(searchTerm))
                    );
                });
            }
            
            // Criar conteúdo CSV
            const headers = ['nome', 'email', 'telefone', 'empresa', 'status'];
            let csvContent = headers.join(',') + '\n';
            
            clientsToExport.forEach(client => {
                const row = [
                    client.nome,
                    client.email,
                    client.telefone,
                    client.company || '',
                    client.status
                ].join(',');
                csvContent += row + '\n';
            });
            
            // Criar link de download
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', 'clientes_sinnergie.csv');
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Adicionar à atividade recente
            addActivity(`Exportou ${clientsToExport.length} cliente(s) para CSV`);
        }
        
        // Funções auxiliares
        function getStatusClass(status) {
            switch(status) {
                case 'Ativo': return 'bg-green-100 text-green-800';
                case 'Inativo': return 'bg-red-100 text-red-800';
                case 'Pendente': return 'bg-yellow-100 text-yellow-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
        
        function getTaskStatusClass(status) {
            switch(status) {
                case 'Pendente': return 'bg-yellow-100 text-yellow-800';
                case 'Em Andamento': return 'bg-blue-100 text-blue-800';
                case 'Concluída': return 'bg-green-100 text-green-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
        
        function getPriorityClass(priority) {
            switch(priority) {
                case 'Baixa': return 'bg-gray-100 text-gray-800';
                case 'Média': return 'bg-blue-100 text-blue-800';
                case 'Alta': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }
        
        function formatDateTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR') + ' ' + date.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
        }
        
        // Aplicar tema
        function applyTheme(theme) {
            if (theme === 'dark') {
                mainContainer.classList.add('theme-dark');
            } else {
                mainContainer.classList.remove('theme-dark');
            }
        }
        
        // Ouvintes de eventos para navegação
        navItems.forEach(item => {
            item.addEventListener('click', function() {
                const section = this.dataset.section;
                showSection(section);
            });
        });
        
        configNavItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const section = this.dataset.config;
                showConfigSection(section);
                
                // Garantir que a tela branca não apareça - forçar exibição do conteúdo
                const configId = `config${section.charAt(0).toUpperCase() + section.slice(1)}`;
                const configElement = document.getElementById(configId);
                if (configElement) {
                    configElement.classList.remove('hidden');
                }
            });
        });
        
        // Ouvintes de eventos para modais de clientes
        addClientBtn.addEventListener('click', () => openModal(addClientModal));
        emptyAddClientBtn.addEventListener('click', () => openModal(addClientModal));
        cancelAddClient.addEventListener('click', () => closeModal(addClientModal));
        
        importCSVBtn.addEventListener('click', () => openModal(importCSVModal));
        emptyImportCSVBtn.addEventListener('click', () => openModal(importCSVModal));
        cancelImportCSV.addEventListener('click', () => closeModal(importCSVModal));
        
        filterClientsBtn.addEventListener('click', () => openModal(filterClientModal));
        clearFilter.addEventListener('click', () => {
            filterStatus.value = '';
            filterCompany.value = '';
        });
        
        applyFilter.addEventListener('click', () => {
            currentFilter = {
                status: filterStatus.value,
                company: filterCompany.value
            };
            
            isFiltered = currentFilter.status || currentFilter.company;
            updateClientTable();
            closeModal(filterClientModal);
            
            // Adicionar à atividade recente
            if (isFiltered) {
                addActivity('Aplicou filtros à lista de clientes');
            }
        });
        
        exportClientsBtn.addEventListener('click', exportClients);
        
        csvFileInput.addEventListener('change', function() {
            if (this.files.length > 0) {
                const fileName = this.files[0].name;
                csvFileName.querySelector('span').textContent = fileName;
                csvFileName.classList.remove('hidden');
                confirmImportCSV.disabled = false;
            } else {
                csvFileName.classList.add('hidden');
                confirmImportCSV.disabled = true;
            }
        });
        
        confirmImportCSV.addEventListener('click', function() {
            if (csvFileInput.files.length > 0) {
                processCSV(csvFileInput.files[0]);
            }
        });
        
        addClientForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const clientData = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                company: document.getElementById('empresa').value,
                status: document.getElementById('status').value
            };
            
            addClient(clientData);
            this.reset();
            closeModal(addClientModal);
        });
        
        editClientToggle.addEventListener('click', function() {
            setViewMode(false);
        });
        
        closeViewClient.addEventListener('click', function() {
            closeModal(viewClientModal);
        });
        
        viewClientForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const clientId = document.getElementById('clientId').value;
            const updatedData = {
                nome: document.getElementById('viewName').value,
                email: document.getElementById('viewEmail').value,
                telefone: document.getElementById('viewPhone').value,
                company: document.getElementById('viewCompany').value,
                status: document.getElementById('viewStatus').value
            };
            
            updateClient(clientId, updatedData);
            closeModal(viewClientModal);
        });
        
        deleteClient.addEventListener('click', function() {
            openModal(deleteConfirmModal);
        });
        
        cancelDelete.addEventListener('click', function() {
            closeModal(deleteConfirmModal);
        });
        
        confirmDelete.addEventListener('click', function() {
            const clientId = document.getElementById('clientId').value;
            deleteClientById(clientId);
            closeModal(deleteConfirmModal);
            closeModal(viewClientModal);
        });
        
        // Event listeners para modal de tarefa
        editTaskToggle.addEventListener('click', function() {
            setTaskViewMode(false);
        });
        
        closeViewTask.addEventListener('click', function() {
            closeModal(viewTaskModal);
        });
        
        viewTaskForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const taskId = document.getElementById('taskIdView').value;
            const updatedData = {
                title: document.getElementById('viewTaskTitle').value,
                clientId: document.getElementById('viewTaskClient').value,
                description: document.getElementById('viewTaskDescription').value,
                dueDate: document.getElementById('viewTaskDueDate').value,
                dueTime: document.getElementById('viewTaskDueTime').value,
                priority: document.getElementById('viewTaskPriority').value,
                status: document.getElementById('viewTaskStatus').value
            };
            
            updateTask(taskId, updatedData);
            closeModal(viewTaskModal);
        });
        
        deleteTask.addEventListener('click', function() {
            openModal(deleteTaskConfirmModal);
        });
        
        cancelDeleteTask.addEventListener('click', function() {
            closeModal(deleteTaskConfirmModal);
        });
        
        confirmDeleteTask.addEventListener('click', function() {
            const taskId = document.getElementById('taskIdView').value;
            deleteTaskById(taskId);
            closeModal(deleteTaskConfirmModal);
            closeModal(viewTaskModal);
        });
        
        // Ouvintes de eventos para tarefas
        addTaskBtn.addEventListener('click', () => openModal(addTaskModal));
        emptyAddTaskBtn.addEventListener('click', () => openModal(addTaskModal));
        cancelAddTask.addEventListener('click', () => closeModal(addTaskModal));
        
        filterTasksBtn.addEventListener('click', () => openModal(filterTaskModal));
        clearTaskFilter.addEventListener('click', () => {
            filterTaskStatus.value = '';
            filterTaskPriority.value = '';
            filterTaskClient.value = '';
        });
        
        applyTaskFilter.addEventListener('click', () => {
            currentTaskFilter = {
                status: filterTaskStatus.value,
                priority: filterTaskPriority.value,
                clientId: filterTaskClient.value
            };
            
            isTaskFiltered = currentTaskFilter.status || currentTaskFilter.priority || currentTaskFilter.clientId;
            updateTaskTable();
            closeModal(filterTaskModal);
            
            // Adicionar à atividade recente
            if (isTaskFiltered) {
                addActivity('Aplicou filtros à lista de tarefas');
            }
        });
        
        addTaskForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const taskData = {
                title: document.getElementById('taskTitle').value,
                clientId: document.getElementById('taskClient').value,
                description: document.getElementById('taskDescription').value,
                dueDate: document.getElementById('taskDueDate').value,
                dueTime: document.getElementById('taskDueTime').value || '00:00',
                priority: document.getElementById('taskPriority').value,
                status: document.getElementById('taskStatus').value
            };
            
            addTask(taskData);
            this.reset();
            closeModal(addTaskModal);
        });
        
        // Ouvintes de eventos para métricas
        metricLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                const metricType = this.dataset.metric;
                let message = '';
                
                switch(metricType) {
                    case 'clientDetail':
                        message = `Total de Clientes: ${clients.length}\n\n`;
                        message += `Ativos: ${clients.filter(c => c.status === 'Ativo').length}\n`;
                        message += `Inativos: ${clients.filter(c => c.status === 'Inativo').length}\n`;
                        message += `Pendentes: ${clients.filter(c => c.status === 'Pendente').length}`;
                        break;
                        
                    case 'taskDetail':
                        message = `Total de Tarefas: ${tasks.length}\n\n`;
                        message += `Pendentes: ${tasks.filter(t => t.status === 'Pendente').length}\n`;
                        message += `Em Andamento: ${tasks.filter(t => t.status === 'Em Andamento').length}\n`;
                        message += `Concluídas: ${tasks.filter(t => t.status === 'Concluída').length}`;
                        break;
                        
                    case 'pendingDetail':
                        const pendingTasks = tasks.filter(t => t.status === 'Pendente');
                        message = `Tarefas Pendentes: ${pendingTasks.length}\n\n`;
                        
                        if (pendingTasks.length > 0) {
                            message += 'Lista de Tarefas Pendentes:\n\n';
                            pendingTasks.forEach((task, index) => {
                                const client = clients.find(c => c.id === task.clientId);
                                const clientName = client ? client.nome : 'Cliente removido';
                                message += `${index + 1}. ${task.title} - Cliente: ${clientName} - Vencimento: ${formatDate(task.dueDate)}\n`;
                            });
                        }
                        break;
                }
                
                alert(message);
                
                // Adicionar à atividade recente
                addActivity('Visualizou detalhes das métricas');
            });
        });
        
        // Ouvintes de eventos para configurações
        profileForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('emailAddress').value;
            
            // Atualizar usuário administrador
            const adminIndex = users.findIndex(u => u.id === 'admin');
            if (adminIndex !== -1) {
                users[adminIndex].name = fullName;
                users[adminIndex].email = email;
                saveUsersToLocalStorage();
            }
            
            // Atualizar display na barra lateral
            document.querySelector('.p-4.border-t.border-gray-800 .text-sm.font-medium').textContent = fullName;
            document.querySelector('.p-4.border-t.border-gray-800 .text-xs.text-gray-300').textContent = email;
            
            alert('Perfil atualizado com sucesso!');
            
            // Adicionar à atividade recente
            addActivity('Atualizou perfil de usuário');
        });
        
        addUserBtn.addEventListener('click', () => openModal(addUserModal));
        cancelAddUser.addEventListener('click', () => closeModal(addUserModal));
        
        addUserForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const userData = {
                id: generateId(),
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                role: document.getElementById('userRole').value
            };
            
            users.push(userData);
            saveUsersToLocalStorage();
            
            // Adicionar usuário à tabela
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                            <span class="text-gray-600 font-medium">${userData.name.charAt(0).toUpperCase()}</span>
                        </div>
                        <div class="ml-4">
                            <div class="text-sm font-medium text-gray-900">${userData.name}</div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-900">${userData.email}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${userData.role === 'Admin' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'}">
                        ${userData.role}
                    </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <a href="#" class="text-indigo-600 hover:text-indigo-900 mr-3 edit-user" data-id="${userData.id}">Editar</a>
                </td>
            `;
            usersTableBody.appendChild(row);
            
            this.reset();
            closeModal(addUserModal);
            
            // Adicionar à atividade recente
            addActivity(`Adicionou o usuário ${userData.name}`);
            
            // Adicionar notificação
            addNotification('Novo Usuário', `${userData.name} foi adicionado como ${userData.role}.`);
        });
        
        saveNotificationSettings.addEventListener('click', function() {
            saveSettingsToLocalStorage();
            
            // Pegar os dados para simulação
            const emailAddress = document.getElementById('notificationEmail').value;
            const whatsAppNumber = document.getElementById('notificationWhatsApp').value;
            
            // Simular o envio
            if (document.getElementById('notifyEmail').checked && emailAddress) {
                const simulateEmail = `
                    <div class="bg-blue-100 text-blue-800 p-4 rounded-md mb-4">
                        <p class="font-bold">✉️ E-mail simulado</p>
                        <p>Para: ${emailAddress}</p>
                        <p>Assunto: Configurações de Notificações Sinnergie</p>
                        <p>Corpo: Suas configurações de notificações foram atualizadas com sucesso.</p>
                    </div>
                `;
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = simulateEmail;
                document.querySelector('main').prepend(tempDiv);
                
                // Remover após 5 segundos
                setTimeout(() => {
                    document.querySelector('main').removeChild(tempDiv);
                }, 5000);
            }
            
            if (whatsAppNumber) {
                const simulateWhatsApp = `
                    <div class="bg-green-100 text-green-800 p-4 rounded-md mb-4">
                        <p class="font-bold">📱 WhatsApp simulado</p>
                        <p>Para: ${whatsAppNumber}</p>
                        <p>Mensagem: Suas configurações de notificações no Sinnergie foram atualizadas com sucesso.</p>
                    </div>
                `;
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = simulateWhatsApp;
                document.querySelector('main').prepend(tempDiv);
                
                // Remover após 5 segundos
                setTimeout(() => {
                    document.querySelector('main').removeChild(tempDiv);
                }, 5000);
            }
            
            // Mostrar popup com informação
            alert('Configurações de notificações salvas com sucesso!\n\nNOTA: Em um ambiente real, as notificações seriam enviadas via servidor para o e-mail e WhatsApp. No momento, estamos simulando o envio na interface.');
            
            // Adicionar à atividade recente
            addActivity('Atualizou configurações de notificações');
            
            // Adicionar notificação no sistema
            addNotification('Configurações Atualizadas', 'Suas configurações de notificações foram atualizadas com sucesso.');
        });
        
        saveThemeSettings.addEventListener('click', function() {
            const selectedTheme = document.querySelector('input[name="theme"]:checked').value;
            applyTheme(selectedTheme);
            saveSettingsToLocalStorage();
            alert('Tema aplicado com sucesso!');
            
            // Adicionar à atividade recente
            addActivity(`Alterou o tema para ${selectedTheme === 'dark' ? 'escuro' : 'claro'}`);
        });
        
        // Ouvintes de eventos para notificações
        notificationBtn.addEventListener('click', function() {
            if (notificationPanel.classList.contains('hidden')) {
                notificationPanel.classList.remove('hidden');
                // Marcar todas como lidas quando o painel é aberto
                if (notifications.some(n => !n.read)) {
                    setTimeout(() => {
                        markAllNotificationsAsRead();
                    }, 3000);
                }
            } else {
                notificationPanel.classList.add('hidden');
            }
        });
        
        clearAllNotifications.addEventListener('click', clearNotifications);
        
        // Função para abrir o modal de todas as notificações
        function openAllNotificationsModal() {
            const allNotificationsList = document.getElementById('allNotificationsList');
            allNotificationsList.innerHTML = '';
            
            if (notifications.length === 0) {
                allNotificationsList.innerHTML = '<p class="text-center text-gray-500">Nenhuma notificação disponível</p>';
            } else {
                notifications.forEach(notification => {
                    const div = document.createElement('div');
                    div.className = 'p-4 border border-gray-200 rounded-md';
                    div.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm font-medium text-gray-900">${notification.title}</p>
                                <p class="text-sm text-gray-500 mt-1">${notification.message}</p>
                                <p class="text-xs text-gray-400 mt-1">${formatDateTime(notification.date)}</p>
                            </div>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${notification.read ? 'bg-gray-100 text-gray-800' : 'bg-green-100 text-green-800'}">
                                ${notification.read ? 'Lida' : 'Nova'}
                            </span>
                        </div>
                    `;
                    allNotificationsList.appendChild(div);
                });
            }
            
            openModal(document.getElementById('allNotificationsModal'));
            notificationPanel.classList.add('hidden');
        }
        
        // Adicionar evento ao botão "Ver todas"
        document.getElementById('viewAllNotifications').addEventListener('click', openAllNotificationsModal);
        
        // Fechar modal de todas as notificações
        document.getElementById('closeAllNotifications').addEventListener('click', function() {
            closeModal(document.getElementById('allNotificationsModal'));
        });
        
        // Busca global
        globalSearch.addEventListener('input', function() {
            // Determinar qual seção está ativa
            const activeSection = document.querySelector('.nav-item.active-nav').dataset.section;
            
            switch(activeSection) {
                case 'clientes':
                    updateClientTable();
                    break;
                case 'tarefas':
                    updateTaskTable();
                    break;
            }
        });
        
        // Adicionar algumas notificações iniciais
        function addInitialNotifications() {
            if (notifications.length === 0) {
                addNotification('Bem-vindo ao Sinnergie', 'Sistema de gestão de clientes iniciado com sucesso.');
                
                // Verificar se há clientes e tarefas para resumo
                if (clients.length > 0 || tasks.length > 0) {
                    addNotification('Resumo do Sistema', `${clients.length} cliente(s) e ${tasks.length} tarefa(s) carregados.`);
                }
            }
        }
        
        // Inicializar
        function initialize() {
            // Carregar dados do localStorage
            loadClientsFromLocalStorage();
            loadTasksFromLocalStorage();
            loadActivitiesFromLocalStorage();
            loadNotificationsFromLocalStorage();
            loadUsersFromLocalStorage();
            loadSettingsFromLocalStorage();
            
            // Configurar a seção inicial (clientes)
            showSection('clientes');
            
            // Configurar a seção inicial de configurações (perfil)
            showConfigSection('perfil');
            
            // Adicionar notificações iniciais
            addInitialNotifications();
            
            // Adicionar atividade inicial
            if (activities.length === 0) {
                addActivity('Sistema iniciado');
            }
            
            // Debug - verificar dados carregados
            console.log('Sistema inicializado:');
            console.log('- Clientes:', clients.length);
            console.log('- Tarefas:', tasks.length);
            console.log('- Atividades:', activities.length);
            console.log('- Notificações:', notifications.length);
        }
        
        // Iniciar o sistema
        initialize();
    </script>
</body>
</html>